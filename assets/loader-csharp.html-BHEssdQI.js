import{_ as t,c as a,a as o,o as c}from"./app-DZLWD7CX.js";const r={};function l(i,e){return c(),a("div",null,e[0]||(e[0]=[o('<p>查看 <a href="https://github.com/Crequency/KitX-Loaders/tree/main/KitX.Loader.CSharp" target="_blank" rel="noopener noreferrer">源代码</a> .</p><h2 id="设计思路" tabindex="-1"><a class="header-anchor" href="#设计思路"><span>设计思路</span></a></h2><p>先决条件:</p><ol><li>dotnet 平台中已有成熟的插件框架: MAF/MEF</li><li>csharp 是基于虚拟机和 CIL 的语言, 易于实现主动加载器</li><li>csharp 有成熟的接口和反射机制</li></ol><p>设计:</p><p>插件实现特定接口, 加载器通过 MEF 框架加载插件之后, 通过特定接口获取插件信息并进行调度</p><h2 id="实际设计" tabindex="-1"><a class="header-anchor" href="#实际设计"><span>实际设计</span></a></h2><h3 id="文件组成" tabindex="-1"><a class="header-anchor" href="#文件组成"><span>文件组成</span></a></h3><p>程序部分包含:</p><ul><li><code>ArgsParser.cs</code>: 启动参数处理器</li><li><code>Option.cs</code>: 启动选项定义类</li><li><code>Program.cs</code>: 程序入口</li></ul><p>加载器部分包含</p><ul><li><code>CommunicationManager.cs</code>: 通讯管理器, 负责处理与 KitX Dashboard 的通讯</li><li><code>PluginManager.cs</code>: 插件管理器, 调度 KitX Plugin 的生命周期</li></ul><h3 id="执行流程" tabindex="-1"><a class="header-anchor" href="#执行流程"><span>执行流程</span></a></h3><ol><li>处理命令行启动参数 <ol><li>得到 KitX Dashboard 插件服务器地址 <ol><li>随即实例化 <code>CommunicationManager</code> 并开始 TCP 通讯</li></ol></li><li>得到插件跟启动文件路径 <ol><li>随即实例化 <code>PluginManager.cs</code></li><li>传入发送信息的回调函数</li><li>加载插件 (通过 MEF 框架) <ol><li>从插件实现了 <code>IIdentityInterface</code> 接口的类中整理 <code>PluginStruct</code> 实例</li><li>向仪表盘发送 Json 序列化的 <code>PluginStruct</code>, 格式: &quot;PluginStruct: <code>content</code>&quot;</li><li>获取插件实现了 <code>IController</code> 接口的类实例 <code>controller</code></li><li>调用 <code>controller.SetRootPath</code> 向插件传入插件文件所在路径</li><li>调用 <code>controller.SetSendCommandAction</code> 向插件传入发送 <code>Command</code> 的回调函数</li><li>调用 <code>controller.Start</code> 开始插件生命周期</li></ol></li></ol></li></ol></li></ol>',14)]))}const d=t(r,[["render",l],["__file","loader-csharp.html.vue"]]),n=JSON.parse(`{"path":"/en/rules/loader/items/loader-csharp.html","title":"适用于 C# 的 Loader","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"适用于 C# 的 Loader","description":"关于适用于 C# 的 Loader 的设计思路与技术细节","createTime":"2023/07/27 00:25:50","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://kitx.docs.catrol.cn/en/rules/loader/items/loader-csharp.html"}],["meta",{"property":"og:url","content":"https://kitx.docs.catrol.cn/en/rules/loader/items/loader-csharp.html"}],["meta",{"property":"og:site_name","content":"KitX Docs"}],["meta",{"property":"og:title","content":"适用于 C# 的 Loader"}],["meta",{"property":"og:description","content":"关于适用于 C# 的 Loader 的设计思路与技术细节"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-02-07T05:38:37.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-07T05:38:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"适用于 C# 的 Loader\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-07T05:38:37.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":1.33,"words":398},"git":{"updatedTime":1738906717000,"contributors":[{"name":"调皮豆干","username":"调皮豆干","email":"catrol@qq.com","commits":3,"avatar":"https://avatars.githubusercontent.com/调皮豆干?v=4","url":"https://github.com/调皮豆干"},{"name":"Dynesshely","username":"Dynesshely","email":"catrol@qq.com","commits":4,"avatar":"https://avatars.githubusercontent.com/Dynesshely?v=4","url":"https://github.com/Dynesshely"}],"changelog":[{"hash":"faa316effc83987589ef4ddfcc45ab462c49aeb7","date":1688294229000,"email":"catrol@qq.com","author":"调皮豆干","message":"💾 📝 Feat, Chore(Rules): Add csharp loader doc.","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/faa316effc83987589ef4ddfcc45ab462c49aeb7"},{"hash":"bc61e250f395fcc944835cb762499ed26fdcad81","date":1688299037000,"email":"catrol@qq.com","author":"调皮豆干","message":"📄 Docs(Loaders): Updated csharp loader.","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/bc61e250f395fcc944835cb762499ed26fdcad81"},{"hash":"5de94fb86ba52ada2348156baef9978c5fe96dbb","date":1688300096000,"email":"catrol@qq.com","author":"调皮豆干","message":"📄 Docs(Loaders): Updated csharp loader.","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/5de94fb86ba52ada2348156baef9978c5fe96dbb","tag":"v23.07.02.3","tagUrl":"https://github.com/Crequency/KitX-Docs//releases/tag/v23.07.02.3"},{"hash":"057024f141b705641af512e72678a8281448a4fd","date":1737775975000,"email":"catrol@qq.com","author":"Dynesshely","message":"📦 Struct: Move to <code v-pre>notes</code> folder to match theme's requirements","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/057024f141b705641af512e72678a8281448a4fd"},{"hash":"ea653ca4bff29fe24e77077471595fce7fdb672f","date":1737777012000,"email":"catrol@qq.com","author":"Dynesshely","message":"📝 Chore: Remove hard-coded permalink","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/ea653ca4bff29fe24e77077471595fce7fdb672f"},{"hash":"bd0ec611249aa8e8b3c6079818362214bf33adbf","date":1737778471000,"email":"catrol@qq.com","author":"Dynesshely","message":"💾 Feat(Plume-Theme): Migrated","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/bd0ec611249aa8e8b3c6079818362214bf33adbf"},{"hash":"d0f0a20342aeb93dbb1b4b64f3ec7b7178ee6c71","date":1738906717000,"email":"catrol@qq.com","author":"Dynesshely","message":"💾 Feat(Plume-Theme): Configured sidebar and locales settings","commitUrl":"https://github.com/Crequency/KitX-Docs//commit/d0f0a20342aeb93dbb1b4b64f3ec7b7178ee6c71"}]},"filePathRelative":"en/rules/loader/items/loader-csharp.md","categoryList":[{"id":"a4f86f","sort":10000,"name":"rules"},{"id":"223e80","sort":10001,"name":"loader"},{"id":"066e06","sort":10010,"name":"items"}]}`);export{d as comp,n as data};
